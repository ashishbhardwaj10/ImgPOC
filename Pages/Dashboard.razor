@page "/dashboard"
@using ImgPOC.Store.DashboardUseCase
@inject HttpClient Http
@inherits Fluxor.Blazor.Web.Components.FluxorComponent
@inject IMatDialogService MatDialogService
@* @attribute [Authorize] *@
<PageTitle>Dashboard - Images</PageTitle>

<style>
    .demo-mat-card {
        max-width: 400px;
    }

    .demo-mat-card-content {
        padding: 1rem;
    }

    .demo-mat-card-clean-margin {
        margin: 0px;
    }

    .spinner {
        /* border: 16px solid silver;
        border-top: 16px solid #337AB7;
        border-radius: 50%; */
        width: 80px;
        height: 80px;
        animation: spin 700ms linear infinite;
        top: 40%;
        left: 55%;
        position: absolute;
    }
</style>

@if (DashboardState.Value.IsLoading)
{
    @* <div class="spinner"></div> *@
    <MatProgressCircle Id="matPro" Class="spinner" Indeterminate="true" FourColored="true" />
}
@if (DashboardState.Value.PhotoPage?.photos != null)
{
    int counter = 0;
    <div class="mat-layout-grid">
        <div class="mat-layout-grid-inner">
            @foreach (var photo in DashboardState.Value.PhotoPage.photos)
            {
                counter++;
                if (counter <= 5)
                {
                    <div class="mat-layout-grid-cell">
                        <MatCard class="demo-mat-card">
                            <MatCardContent>
                                <MatCardMedia Wide="true" ImageUrl="@photo.src.original"></MatCardMedia>
                            </MatCardContent>
                            <MatCardActions>
                                <MatCardActionButtons>
                                    <MatButton OnClick="@(_ => OpenDialogFromService(@photo.src.tiny,@photo.id,@photo.photographer))">Details</MatButton>
                                </MatCardActionButtons>
                            </MatCardActions>
                        </MatCard>
                    </div>
                }
                else if(counter >= 10)
                {
                    <div class="mat-layout-grid-cell">
                        <MatCard class="demo-mat-card">
                            <MatCardContent>
                                <MatCardMedia Wide="true" ImageUrl="@photo.src.original"></MatCardMedia>
                            </MatCardContent>
                            <MatCardActions>
                                <MatCardActionButtons>
                                    <MatButton OnClick="@(_ => OpenDialogFromService(@photo.src.tiny,@photo.id,@photo.photographer))">Details</MatButton>
                                </MatCardActionButtons>
                            </MatCardActions>
                        </MatCard>
                    </div>
                }
                else
                {
                    <div class="mat-layout-grid-cell">
                        <MatCard class="demo-mat-card">
                            <MatCardContent>
                                <MatCardMedia Wide="true" ImageUrl="@photo.src.original"></MatCardMedia>
                            </MatCardContent>
                            <MatCardActions>
                                <MatCardActionButtons>
                                    <MatButton OnClick="@(_ => OpenDialogFromService(@photo.src.tiny,@photo.id,@photo.photographer))">Details</MatButton>
                                </MatCardActionButtons>
                            </MatCardActions>
                        </MatCard>
                    </div>
                }
            }
        </div>
    </div>
}
