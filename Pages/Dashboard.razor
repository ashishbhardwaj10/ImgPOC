@page "/dashboard"
@using ImgPOC.Store.DashboardUseCase
@inject HttpClient Http
@inherits Fluxor.Blazor.Web.Components.FluxorComponent
@inject IMatDialogService MatDialogService
@attribute [Authorize]
<PageTitle>Dashboard - Images</PageTitle>

@if (DashboardState.Value.IsLoading)
{
    @* <div class="spinner"></div> *@
    <MatProgressCircle Id="matPro" Class="spinner" Indeterminate="true" FourColored="true" />
}
@if (DashboardState.Value.PhotoPage?.photos != null)
{
    int counter = 0;
    <div class="mat-layout-grid">
        <div class="mat-layout-grid-inner">
            @foreach (var photo in DashboardState.Value.PhotoPage.photos)
            {
                counter++;
                if (counter <= 5)
                {
                    <div class="mat-layout-grid-cell">
                        <MatCard class="demo-mat-card">
                            <MatCardContent>
                                <MatCardMedia Wide="true" ImageUrl="@photo.src.original"></MatCardMedia>
                            </MatCardContent>
                            <MatCardActions>
                                <MatCardActionButtons>
                                    <MatButton OnClick="@(_ => OpenDialogFromService(@photo.src.tiny,@photo.id,@photo.photographer))">Details</MatButton>
                                </MatCardActionButtons>
                            </MatCardActions>
                        </MatCard>
                    </div>
                }
                else if(counter >= 10)
                {
                    <div class="mat-layout-grid-cell">
                        <MatCard class="demo-mat-card">
                            <MatCardContent>
                                <MatCardMedia Wide="true" ImageUrl="@photo.src.original"></MatCardMedia>
                            </MatCardContent>
                            <MatCardActions>
                                <MatCardActionButtons>
                                    <MatButton OnClick="@(_ => OpenDialogFromService(@photo.src.tiny,@photo.id,@photo.photographer))">Details</MatButton>
                                </MatCardActionButtons>
                            </MatCardActions>
                        </MatCard>
                    </div>
                }
                else
                {
                    <div class="mat-layout-grid-cell">
                        <MatCard class="demo-mat-card">
                            <MatCardContent>
                                <MatCardMedia Wide="true" ImageUrl="@photo.src.original"></MatCardMedia>
                            </MatCardContent>
                            <MatCardActions>
                                <MatCardActionButtons>
                                    <MatButton OnClick="@(_ => OpenDialogFromService(@photo.src.tiny,@photo.id,@photo.photographer))">Details</MatButton>
                                </MatCardActionButtons>
                            </MatCardActions>
                        </MatCard>
                    </div>
                }
            }
        </div>
    </div>
}
